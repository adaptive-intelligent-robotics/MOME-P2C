Bootstrap: library
From: airl_lab/default/airl_env:qdax_f57720d0

%labels
    Author adaptive.intelligent.robotics@gmail.com
    Version v0.0.1

%files
    requirements.txt /

%environment
   export PYTHONPATH=$PYTHONPATH:/workspace/lib/python3.8/site-packages/
   export LD_LIBRARY_PATH="/workspace/lib:$LD_LIBRARY_PATH"
   export PATH=$PATH:/usr/local/go/bin

%post
   export LD_LIBRARY_PATH="/workspace/lib:$LD_LIBRARY_PATH"

   # Update
   apt-get update -y
   pip3 install --upgrade pip

   # Install
   pip3 install -r /requirements.txt
   DEBIAN_FRONTEND=noninteractive apt-get install -y python3-git python3-matplotlib python3-pip libsdl1.2-dev libomp-dev
   pip3 install jaxlib==0.3.15+cuda11_cudnn82 -f https://storage.googleapis.com/jax-releases/jax_cuda_releases.html
   apt-get install -y python3-tk
   pip3 install pymoo==0.6.0.1

   # Create working directory
   mkdir -p /project/

   # Enter working directory
   cd /project/
   
   git clone https://gitlab.doc.ic.ac.uk/AIRL/research_projects/hannah_janmohamed/pc-mome-pgx .
   git checkout $SINGULARITY_COMMIT
    

%apprun mome
    cd /project/
    # Running the script
    echo
    echo "Running python3 main.py algo=mome "$@" "
    echo
    python3 main.py algo=mome "$@"

%apprun mome-pgx
    cd /project/
    # Running the script
    echo
    echo "Running python3 main.py algo=mome-pgx "$@" "
    echo
    python3 main.py algo=mome-pgx "$@"

%apprun mome-p2c-keep-prefs
    cd /project/
    # Running the script
    echo
    echo "Running python3 main.py algo=mome-p2c-keep-prefs "$@" "
    echo
    python3 main.py algo=mome-p2c-keep-prefs "$@"


%apprun mome-p2c
    cd /project/
    # Running the script
    echo
    echo "Running python3 main.py algo=mome-p2c "$@" "
    echo
    python3 main.py algo=mome-p2c "$@"

%apprun mome-p2c-actor-random-sampler
    cd /project/
    # Running the script
    echo
    echo "Running python3 main.py algo=mome-p2c-actor-random-sampler "$@" "
    echo
    python3 main.py algo=mome-p2c-actor-random-sampler "$@"

%apprun mome-p2c-no-actor
    cd /project/
    # Running the script
    echo
    echo "Running python3 main.py algo=mome-p2c-no-actor "$@" "
    echo
    python3 main.py algo=mome-p2c-no-actor "$@"

%apprun mome-p2c-no-qpg
    cd /project/
    # Running the script
    echo
    echo "Running python3 main.py algo=mome-p2c-no-qpg "$@" "
    echo
    python3 main.py algo=mome-p2c-no-qpg "$@"

%apprun mome-p2c-no-crowding
    cd /project/
    # Running the script
    echo
    echo "Running python3 main.py algo=mome-p2c-no-crowding "$@" "
    echo
    python3 main.py algo=mome-p2c-no-crowding "$@"

%apprun mome-p2c-one-hot
    cd /project/
    # Running the script
    echo
    echo "Running python3 main.py algo=mome-p2c-one-hot "$@" "
    echo
    python3 main.py algo=mome-p2c-one-hot "$@"


%apprun pga
    cd /project/
    # Running the script
    echo
    echo "Running python3 baselines_main.py algo=pga "$@" "
    echo
    python3 baselines_main.py algo=pga "$@"


%apprun nsga2
    cd /project/
    # Running the script
    echo
    echo "Running python3 baselines_main.py algo=nsga2 "$@" "
    echo
    python3 baselines_main.py algo=nsga2 "$@"
    

%apprun spea2
    cd /project/
    # Running the script
    echo
    echo "Running python3 baselines_main.py algo=spea2 "$@" "
    echo
    python3 baselines_main.py algo=spea2 "$@"
    